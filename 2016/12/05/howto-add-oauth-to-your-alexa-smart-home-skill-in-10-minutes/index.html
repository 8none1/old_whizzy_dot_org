<!DOCTYPE html>
<html lang="en-GB">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="/xmlrpc.php">
	<title>HOWTO:  Add OAUTH to your Alexa Smart Home skill in 10 minutes &#8211; whizzy.org</title>
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//s.w.org">
<link rel="alternate" type="application/rss+xml" title="whizzy.org &raquo; Feed" href="/feed/">
<link rel="alternate" type="application/rss+xml" title="whizzy.org &raquo; Comments Feed" href="/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="whizzy.org &raquo; HOWTO:  Add OAUTH to your Alexa Smart Home skill in 10 minutes Comments Feed" href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.7.2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="googleOpenSans-css" href="//fonts.googleapis.com/css?family=Open+Sans%3A400%2C400italic%2C600%2C700%2C700italic&#038;subset=latin%2Ccyrillic&#038;ver=5.7.2" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-css" href="/wp-content/themes/emmet-lite/css/bootstrap.min.css" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-css" href="/wp-content/themes/emmet-lite/css/font-awesome.min.css" type="text/css" media="all">
<link rel="stylesheet" id="flexslider-css" href="/wp-content/themes/emmet-lite/css/flexslider.min.css" type="text/css" media="all">
<link rel="stylesheet" id="emmet-main-css" href="/wp-content/themes/emmet-lite/css/emmet-style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="emmet-style-css" href="/wp-content/themes/emmet-lite/style.css" type="text/css" media="all">
<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js?ver=3.5.1" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/posts/819">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 5.7.2">
<link rel="canonical" href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/">
<link rel="shortlink" href="/?p=819">
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2016%2F12%2F05%2Fhowto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes%2F">
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2016%2F12%2F05%2Fhowto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes%2F&#038;format=xml">
    <style type="text/css" id="theme-header-css">.welcome-right {
            background: url("/wp-content/themes/emmet-lite/images/welcome-image.png") no-repeat scroll left center rgba(0, 0, 0, 0);
        }

                        .third-left {
            background: url("/wp-content/themes/emmet-lite/images/third-image.png") no-repeat scroll right center rgba(0, 0, 0, 0);
        }</style>
    <style type="text/css" id="custom-background-css">body.custom-background { background-image: url("/wp-content/themes/emmet-lite/images/main-bg.jpg"); background-position: center top; background-size: auto; background-repeat: no-repeat; background-attachment: fixed; }</style>
	</head>
<body class="post-template-default single single-post postid-819 single-format-standard custom-background emmet pages-background">
<a class="skip-link screen-reader-text" href="#main">
	Skip to content</a>
<div class="wrapper  ">
				<header id="header" class="main-header">
							<div class="top-header">
					<div class="container">
												<div class="top-menu">
							<ul id="menu-top-menu" class="menu"></ul>							<div class="clearfix"></div>
						</div>

						<div class="social-profile type1 ">
																						<a href="https://twitter.com/8none1" class="button-twitter" title="Twitter" target="_blank"><i class="fa fa-twitter-square"></i></a>
																													<a href="https://github.com/8none1" class="button-google" title="Google +" target="_blank"><i class="fa fa-google-plus-square"></i></a>
																																											<a href="https://www.youtube.com/user/willcooke1" class="button-youtube" title="Youtube" target="_blank"><i class="fa fa-youtube-square"></i></a>
																					                            						</div>
						<div class="contact-info ">
							<ul class=" info-list">
																																																									</ul>
							<div class="clearfix"></div>
						</div>
					</div>
				</div>
							<div class="site-header" data-sticky-menu="off">
				<div class="container">
					<div class="site-logo">
													<a class="home-link" href="/" title="whizzy.org" rel="home">
                                											<div class="site-description">
									<p class="site-title ">whizzy.org</p>
																			<p class="site-tagline">On code and gadgets.</p>
																	</div>
							</a>
											</div>
                    <button class="menu-toggle" aria-controls="main-menu" aria-expanded="false"><span class="menu-show">Menu</span>
                        <span class="menu-close">Close</span>
                        
                    </button>
					<div id="navbar" class="navbar">
						<nav id="site-navigation" class="main-navigation">
							<ul class="sf-menu"></ul>						</nav>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
		</header>
		<div id="main" class="site-main">
<div class="header-image-wrapper">
    <div class="header-image with-header-image " style="background-image: url(/wp-content/themes/emmet-lite/images/headers/bg.png);">
        <div class="container">
                            <h1 class="page-title">HOWTO:  Add OAUTH to your Alexa Smart Home skill in 10 minutes</h1>
                    </div>
    </div>
</div>
<div class="container main-container">
    <div class="row clearfix">
        <div class=" col-xs-12 col-sm-12 col-md-8 col-lg-8">
                            <article id="post-819" class="post-819 post type-post status-publish format-standard hentry category-iot">
    <div class="entry-content">
                            <p>Alexa smart home skills require you to provide <a href="https://oauth.net/2/">OAUTH2</a> so that users can authorise a skill to access the assumed cloud service powering their lightbulbs or any number of other pointlessly connected devices.  This makes sense since OAUTH2 is a standard and secure way to grant access for users from one system to the resources of another.  However, with this come a few caveats which are potential blockers for casual skill developers like me.  If you&#8217;re writing a skill for your own personal use, with no intention of adding it to the store, you still have to have a valid and recognised SSL certificate and a whole OAUTH2 server set up somewhere.</p>
<p>The SSL certificate is easy enough to implement, but it&#8217;s a bit of a faff (renewing Let&#8217;s Encrypt certs, or paying for cert which needs you to deal with the certificate authorities, send in scans of your passport and other tedious red tape) but &#8211; in my opinion anyway &#8211; setting up an OAUTH server is even more of a faff.  If only there was some way to avoid having to do either of these things&#8230;.</p>
<h2>Using &#8220;Login With Amazon&#8221; as your OAUTH provider</h2>
<p>Since you already have an Amazon account you can use &#8220;Login With Amazon&#8221; as your skill&#8217;s OAUTH server and your normal everyday Amazon account as your credentials.  You&#8217;re only sharing your Amazon account data with yourself, and even then we can restrict it to just your login ID.  You don&#8217;t actually need to do anything with the OAUTH token once it&#8217;s returned since you&#8217;re the only user.  I mean, you could if you wanted to, but this HOWTO assumes that you&#8217;re the only user and that you don&#8217;t care about that sort of thing.  We are also going to assume that you have already created the Lambda function and the smart home skill or are familiar with how to do that.  This is a bit tricky because you can&#8217;t test your smart home skill on a real device until you&#8217;ve implemented OAUTH, and you can&#8217;t complete the OAUTH set-up until you&#8217;ve got the IDs from your Lambda function and skill.  If you haven&#8217;t written your skill yet, just create a placeholder Lambda function and smart home skill to be going on with.</p>
<p>Much of this information is available from the official Amazon instructions available here:<a href="https://developer.amazon.com/public/community/post/Tx3CX1ETRZZ2NPC/Alexa-Account-Linking-5-Steps-to-Seamlessly-Link-Your-Alexa-Skill-with-Login-wit"> https://developer.amazon.com/public/community/post/Tx3CX1ETRZZ2NPC/Alexa-Account-Linking-5-Steps-to-Seamlessly-Link-Your-Alexa-Skill-with-Login-wit</a>. What follows is a rehash and slight reorganisation of that doc which is hopefully a bit easier to follow.</p>
<h3>1. Create a new Login With Amazon Security Profile</h3>
<p>From the Amazon Developer Site, go to Apps &amp; Services -&gt; Login With Amazon.  Or click <a href="https://developer.amazon.com/lwa/sp/overview.html">https://developer.amazon.com/lwa/sp/overview.html</a></p>
<p>Click &#8220;Create a New Security Profile&#8221;.  Fill out the form along these lines:</p>
<p><a href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/Screenshot-from-2016-11-30-13-40-23.png"><img loading="lazy" class="aligncenter wp-image-823 size-large" src="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/Screenshot-from-2016-11-30-13-40-23-1024x468.png" alt="screenshot-from-2016-11-30-13-40-23" width="770" height="352" srcset="/wp-content/uploads/2016/12/Screenshot-from-2016-11-30-13-40-23-1024x468.png 1024w, /wp-content/uploads/2016/12/Screenshot-from-2016-11-30-13-40-23-300x137.png 300w, /wp-content/uploads/2016/12/Screenshot-from-2016-11-30-13-40-23-768x351.png 768w, /wp-content/uploads/2016/12/Screenshot-from-2016-11-30-13-40-23.png 1150w" sizes="(max-width: 770px) 100vw, 770px"></a></p>
<p>and hit Save.</p>
<p>You should see a message along the lines of &#8220;Login with Amazon successfully enabled for Security Profile.&#8221;</p>
<p>Hover the mouse over the cog icon to the right of your new security profile and choose &#8220;Security Profile&#8221;.</p>
<p>Copy your &#8220;Client ID&#8221;  and &#8220;Client Secret&#8221; and paste it in to a notepad.  You&#8217;ll need this again shortly.</p>
<p><a href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/clientid2.png"><img loading="lazy" class="aligncenter wp-image-825 size-large" src="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/clientid2-1024x526.png" alt="clientid2" width="770" height="396" srcset="/wp-content/uploads/2016/12/clientid2-1024x526.png 1024w, /wp-content/uploads/2016/12/clientid2-300x154.png 300w, /wp-content/uploads/2016/12/clientid2-768x395.png 768w, /wp-content/uploads/2016/12/clientid2.png 1158w" sizes="(max-width: 770px) 100vw, 770px"></a></p>
<h3>2. Configure your skill to use Login With Amazon</h3>
<p>Back in the <a href="https://developer.amazon.com/edw/home.html#/">Developer Console</a>, navigate to the Configuration page for your skill.  (Click on your skill, then click on Configuration).  You need to enable &#8220;<strong>Account Linking</strong>&#8221; and this will then show the extra boxes discussed below.</p>
<p>In to the &#8220;<strong>Authorization URL</strong>&#8221; box you should put:</p>
<pre>https://www.amazon.com/ap/oa/?redirect_url=</pre>
<p>and then copy the Redirect URL from further down the page and append it to the end of the Authorization URL.  For example:</p>
<pre>https://www.amazon.com/ap/oa/?redirect_url=https://layla.amazon.com/api/skill/link/1234ABCD1234AB</pre>
<p><a href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/authurl.png"><img loading="lazy" class="aligncenter wp-image-827 size-full" src="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/authurl.png" alt="authurl" width="801" height="775" srcset="/wp-content/uploads/2016/12/authurl.png 801w, /wp-content/uploads/2016/12/authurl-300x290.png 300w, /wp-content/uploads/2016/12/authurl-768x743.png 768w" sizes="(max-width: 801px) 100vw, 801px"></a></p>
<p>As far as I can tell Layla is for UK/Europe and Pitangui is for the US.  Use the appropriate one for you.  Also, keep a <span style="text-decoration: underline;">note of the redirect URL</span> in your notepad, you will need this again later.</p>
<p>In to the &#8220;<strong>Client Id</strong>&#8221; box paste your client id from step 1.</p>
<p>You can leave &#8220;<strong>Domain List</strong>&#8221; blank for now.</p>
<p>For &#8220;<strong>Scope</strong>&#8221; I suggest you use:</p>
<pre>profile:user_id</pre>
<p>This will give your Alexa Skill access to a minimal amount of information about you from Amazon, in this case just a user_id.  That user ID is unique to your app so can&#8217;t be used by other apps or to identify that user elsewhere.  Since you don&#8217;t really have any customers for your skill, only you, there is no reason to provide access to any other information.</p>
<p>Further down the page you need to configure the <strong>Grant Type</strong>:</p>
<p><a href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/granttype.png"><img loading="lazy" class="aligncenter wp-image-828 size-full" src="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/granttype.png" alt="granttype" width="842" height="534" srcset="/wp-content/uploads/2016/12/granttype.png 842w, /wp-content/uploads/2016/12/granttype-300x190.png 300w, /wp-content/uploads/2016/12/granttype-768x487.png 768w" sizes="(max-width: 842px) 100vw, 842px"></a></p>
<p>Select an &#8220;<strong>Auth Code Grant</strong>&#8221;</p>
<p>Set the &#8220;<strong>Access Token URI</strong>&#8221; to:</p>
<pre>https://api.amazon.com/auth/o2/token</pre>
<p>and in to &#8220;<strong>Client Secret</strong>&#8221; paste your secret from step 1.</p>
<p>You must include a link to your &#8220;<strong>Privacy Policy URL</strong>&#8220;.  Since you are the only person who cares you could host a blank file somewhere, or maybe link to a Rick Astley video on YouTube?</p>
<p>Finally hit <strong>Save</strong>.</p>
<h3>3. Link Login With Amazon back to your Skill</h3>
<p>Head back to the Login With Amazon page: <a href="https://developer.amazon.com/lwa/sp/overview.html">https://developer.amazon.com/lwa/sp/overview.html</a></p>
<p>Hover over the cog of your Security Profile and choose<strong> Web Settings</strong>:</p>
<p><a href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/returnurl.png"><img loading="lazy" class="aligncenter wp-image-830 size-full" src="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/returnurl.png" alt="returnurl" width="920" height="358" srcset="/wp-content/uploads/2016/12/returnurl.png 920w, /wp-content/uploads/2016/12/returnurl-300x117.png 300w, /wp-content/uploads/2016/12/returnurl-768x299.png 768w" sizes="(max-width: 920px) 100vw, 920px"></a></p>
<p>In to the &#8220;<strong>Allowed Return URLs</strong>&#8221; box paste your Redirect URL from step 2 and hit save.</p>
<h3>4.  Login to Amazon from your skill and do the OAUTH dance</h3>
<p>From the Alexa app on your phone navigate to your new Smart Home Skill and you see that it says &#8220;<strong>Account Linking Required</strong>&#8220;.</p>
<p><a href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/IMG_0473.png"><img loading="lazy" class="aligncenter size-medium wp-image-831" src="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/IMG_0473-197x300.png" alt="img_0473" width="197" height="300" srcset="/wp-content/uploads/2016/12/IMG_0473-197x300.png 197w, /wp-content/uploads/2016/12/IMG_0473.png 638w" sizes="(max-width: 197px) 100vw, 197px"></a></p>
<p>Click &#8220;<strong>Enable Skill</strong>&#8221; and you&#8217;ll be asked to login with your Amazon credentials:</p>
<p><a href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/IMG_0474.png"><img loading="lazy" class="aligncenter size-medium wp-image-832" src="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/IMG_0474-175x300.png" alt="img_0474" width="175" height="300" srcset="/wp-content/uploads/2016/12/IMG_0474-175x300.png 175w, /wp-content/uploads/2016/12/IMG_0474-599x1024.png 599w, /wp-content/uploads/2016/12/IMG_0474.png 640w" sizes="(max-width: 175px) 100vw, 175px"></a></p>
<p>Once you log in you should see a success message:</p>
<p><a href="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/IMG_0475.png"><img loading="lazy" class="aligncenter size-medium wp-image-833" src="/2016/12/05/howto-add-oauth-to-your-alexa-smart-home-skill-in-10-minutes/wp-content/uploads/2016/12/IMG_0475-176x300.png" alt="img_0475" width="176" height="300" srcset="/wp-content/uploads/2016/12/IMG_0475-176x300.png 176w, /wp-content/uploads/2016/12/IMG_0475-600x1024.png 600w, /wp-content/uploads/2016/12/IMG_0475.png 640w" sizes="(max-width: 176px) 100vw, 176px"></a></p>
<p>And you&#8217;re done.</p>
<p>&nbsp;</p>
<p>Additional:  Here&#8217;s a post on how to read the users details from Amazon once they are linked:  <a href="/2017/03/retrieving-user-profile-data-from-login-with-amazon-on-alexa/">/2017/03/retrieving-user-profile-data-from-login-with-amazon-on-alexa/</a></p>
        
        <div class="clearfix"></div>
            </div>
<!-- .entry-content -->
    <footer class="entry-footer">
                    <div class="meta">
                <span class="author">Posted by </span><a href="/author/will/" title="Posts by will" rel="author">will</a>                <span class="seporator">/</span>
                <span class="date-post h6">December 5, 2016</span>
                                            </div>        
                             
                                                        <div class="wrapper-post-categories">
                    <h5>Posted in</h5>
                    <a href="/category/iot/" rel="category tag">IoT</a>                    <div class="clearfix"></div>
                </div>
                                    
    </footer><!-- .entry-meta -->
</article><!-- #post -->                
<div id="comments" class="comments-area">

            <h5 class="comments-title">13 Comments</h5>
        <ol class="comment-list">
                <liclass even thread-even depth-1 parent id="comment-123">
        <div id="div-comment-123" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/a670babd2e35ae57ada2fd87d56d0239?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/a670babd2e35ae57ada2fd87d56d0239?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn"><a href="http://appsthatmatter.de/" rel="external nofollow ugc" class="url">jonas</a></h4>        <div class="comment-meta commentmetadata date-post h6">
        March 21, 2017 <span>at 10:08 am</span>            </div>
    <p>Is there any way to get the actual user information (mail or user_id) within the lambda function?</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <ol class="children">
    <liclass byuser comment-author-will bypostauthor odd alt depth-2 parent id="comment-124">
        <div id="div-comment-124" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/ad368ae612310967c8023a78d40bf35e?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ad368ae612310967c8023a78d40bf35e?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn"><a href="/" rel="external nofollow ugc" class="url">Will Cooke</a></h4>        <div class="comment-meta commentmetadata date-post h6">
        March 25, 2017 <span>at 2:17 pm</span>            </div>
    <p>Have a look at this page:  <a href="https://developer.amazon.com/blogs/post/Tx3CX1ETRZZ2NPC/Alexa-Account-Linking-5-Steps-to-Seamlessly-Link-Your-Alexa-Skill-with-Login-wit" rel="nofollow ugc">https://developer.amazon.com/blogs/post/Tx3CX1ETRZZ2NPC/Alexa-Account-Linking-5-Steps-to-Seamlessly-Link-Your-Alexa-Skill-with-Login-wit</a></p>
<p>Step 5 shows you what the JSON that is passed to your Lambda script might look like.  From that JSON you can access user information including the Amazon User ID.</p>
<p>With that Amazon User ID you can then query Login With Amazon to fetch the users name etc.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <ol class="children">
    <liclass byuser comment-author-will bypostauthor even depth-3 id="comment-125">
        <div id="div-comment-125" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/ad368ae612310967c8023a78d40bf35e?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ad368ae612310967c8023a78d40bf35e?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn"><a href="/" rel="external nofollow ugc" class="url">Will Cooke</a></h4>        <div class="comment-meta commentmetadata date-post h6">
        March 25, 2017 <span>at 2:48 pm</span>            </div>
    <p>Futher:</p>
<p>This guide only allows your scripts to retrieve the USER_ID from Amazon.  You would need to make sure that you use the correct SCOPE so that you can get the information you need.  See section 2 above.  Once you use a scope which can get the users name etc then you need to use this:</p>
<p><a href="https://api.amazon.com/user/profile?access_token=" rel="nofollow ugc">https://api.amazon.com/user/profile?access_token=</a><access token passed to you here></access></p>
<p>That will then return JSON from Login With Amazon including the users name etc.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
</liclass>
</ol>
<!-- .children -->
<!-- #comment-## -->
    <liclass byuser comment-author-will bypostauthor odd alt depth-2 id="comment-126">
        <div id="div-comment-126" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/ad368ae612310967c8023a78d40bf35e?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ad368ae612310967c8023a78d40bf35e?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn"><a href="/" rel="external nofollow ugc" class="url">Will Cooke</a></h4>        <div class="comment-meta commentmetadata date-post h6">
        March 27, 2017 <span>at 8:23 pm</span>            </div>
    <p>I&#8217;ve written this up:</p>
<p><a href="/2017/03/retrieving-user-profile-data-from-login-with-amazon-on-alexa/" rel="nofollow ugc">/2017/03/retrieving-user-profile-data-from-login-with-amazon-on-alexa/</a></p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
</liclass></liclass>
</ol>
<!-- .children -->
<!-- #comment-## -->
    <liclass even thread-odd thread-alt depth-1 id="comment-127">
        <div id="div-comment-127" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/36652134015977a05da14e25eeaaa93d?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/36652134015977a05da14e25eeaaa93d?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn">Prem Kumar</h4>        <div class="comment-meta commentmetadata date-post h6">
        July 15, 2017 <span>at 8:58 am</span>            </div>
    <p>My requirement is our website have allows to book appointment but does not have login option. </p>
<p>We have developed to Alexa skill, which will have account linking to store user preference since we cannot ask same set of question every time when they want to use our Alexa skill. We do not have plans to implemented OAuth server. I would like to know what are options available. Does Amazon provide  OAuth service which I can use?<br>
The user preference that I mentioned will be stored in AWS Dynamo DB, and not in our website. I assumed we can using Amazon login to authenticate the user and store the information but is not working for me.</p>
<p>Please provide as much as details possible since our skill needs to go-alive in next week.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
    <liclass odd alt thread-even depth-1 id="comment-128">
        <div id="div-comment-128" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/1a825673f373570456684fb3494c487e?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/1a825673f373570456684fb3494c487e?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn">Andy</h4>        <div class="comment-meta commentmetadata date-post h6">
        October 10, 2017 <span>at 8:10 pm</span>            </div>
    <p>Very useful, thanks for the post</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
    <liclass even thread-odd thread-alt depth-1 parent id="comment-129">
        <div id="div-comment-129" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/25472b13c479ed39f38320a97e7a1be5?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/25472b13c479ed39f38320a97e7a1be5?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn">bennett</h4>        <div class="comment-meta commentmetadata date-post h6">
        October 19, 2017 <span>at 6:45 am</span>            </div>
    <p>according to <a href="https://tools.ietf.org/html/rfc6749" rel="nofollow ugc">https://tools.ietf.org/html/rfc6749</a><br>
it should be redirect_uri, not redirect_url.<br>
but dont know why, redirect_url seems work too.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <ol class="children">
    <liclass odd alt depth-2 id="comment-130">
        <div id="div-comment-130" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/25472b13c479ed39f38320a97e7a1be5?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/25472b13c479ed39f38320a97e7a1be5?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn">bennett</h4>        <div class="comment-meta commentmetadata date-post h6">
        October 19, 2017 <span>at 8:38 am</span>            </div>
    <p>currently, actually,<br>
no need to add redirect_uri or redirect_url, it works too.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
    <liclass byuser comment-author-will bypostauthor even depth-2 id="comment-132">
        <div id="div-comment-132" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/ad368ae612310967c8023a78d40bf35e?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ad368ae612310967c8023a78d40bf35e?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn"><a href="/" rel="external nofollow ugc" class="url">Will Cooke</a></h4>        <div class="comment-meta commentmetadata date-post h6">
        November 30, 2017 <span>at 9:41 am</span>            </div>
    <p>Ah, interesting, thanks!  I will take a look at updating this over Christmas.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
</liclass></liclass>
</ol>
<!-- .children -->
<!-- #comment-## -->
    <liclass odd alt thread-even depth-1 parent id="comment-131">
        <div id="div-comment-131" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/b1d0c1d9bc08d373ae2d4ad6837848b8?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/b1d0c1d9bc08d373ae2d4ad6837848b8?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn">P.V.B.Raju</h4>        <div class="comment-meta commentmetadata date-post h6">
        October 31, 2017 <span>at 2:49 pm</span>            </div>
    <p>Hi,<br>
I followed your post and I tried to link with my smart home skill but I am getting following error</p>
<p>An Error Occurred While attempting to link Alexa with SmartHomeLightSkill.Please try again later.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <ol class="children">
    <liclass even depth-2 id="comment-134">
        <div id="div-comment-134" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/8026ca9cf013c6e1ca7d41ca3a62f68f?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/8026ca9cf013c6e1ca7d41ca3a62f68f?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn">Amit Joshi</h4>        <div class="comment-meta commentmetadata date-post h6">
        February 10, 2018 <span>at 5:54 am</span>            </div>
    <p>Initially, I saw the error similar to P.V.B.RAJU, but then I changed redirect URL to Pitangui and then it worked.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
</liclass>
</ol>
<!-- .children -->
<!-- #comment-## -->
    <liclass odd alt thread-odd thread-alt depth-1 id="comment-133">
        <div id="div-comment-133" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
        <img alt="" src="https://secure.gravatar.com/avatar/8026ca9cf013c6e1ca7d41ca3a62f68f?s=72&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/8026ca9cf013c6e1ca7d41ca3a62f68f?s=144&#038;d=mm&#038;r=g 2x" class="avatar avatar-72 photo" height="72" width="72" loading="lazy">    </div>
    <div class="comment-content">
    <h4 class="fn">Amit Joshi</h4>        <div class="comment-meta commentmetadata date-post h6">
        February 10, 2018 <span>at 5:54 am</span>            </div>
    <p>Very good information. I was stuck at account linking step. I could complete the authorization process. Initially, I saw the error similar to P.V.B.RAJU, but then I changed redirect URL to Pitangui and then it worked.</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
    <liclass even thread-even depth-1 id="comment-135">
        <div id="div-comment-135" class="comment-body">
    <div class="comment-description">
    <div class="comment-author vcard">
            </div>
    <div class="comment-content">
    <h4 class="fn"><a href="https://www.smarthomelanka.org/smart-home-skill-entwicklen-authentifizierung-und-device-discovery/" rel="external nofollow ugc" class="url">Smart Home Skill entwicklen | Authentifizierung und Device Discovery | Smart Home Sri Lanka</a></h4>        <div class="comment-meta commentmetadata date-post h6">
        June 13, 2018 <span>at 1:27 pm</span>            </div>
    <p>[&#8230;] HOWTO: Add OAUTH to your Alexa Smart Home skill in 10 minutes [&#8230;]</p>

    <div class="reply">
            </div>
        </div>
    </div>
    </div>

    <!-- #comment-## -->
        </liclass></liclass></liclass></liclass></liclass></liclass></liclass>
</ol>
<!-- .comment-list -->

        
                    <p class="no-comments">Comments are closed.</p>
        
        
</div>
<!-- #comments -->                    </div>
        <div class=" col-xs-12 col-sm-12 col-md-4 col-lg-4">
            <aside id="sidebar">
    <div class="widget-area">
                    <div id="archives-4" class="widget widget_archive">
<h3 class="widget-title">Archives</h3>
			<ul>
					<li><a href="/2021/07/">July 2021</a></li>
	<li><a href="/2021/01/">January 2021</a></li>
	<li><a href="/2019/07/">July 2019</a></li>
	<li><a href="/2019/06/">June 2019</a></li>
	<li><a href="/2019/05/">May 2019</a></li>
	<li><a href="/2017/05/">May 2017</a></li>
	<li><a href="/2017/03/">March 2017</a></li>
	<li><a href="/2017/02/">February 2017</a></li>
	<li><a href="/2016/12/">December 2016</a></li>
	<li><a href="/2016/11/">November 2016</a></li>
	<li><a href="/2016/10/">October 2016</a></li>
	<li><a href="/2016/09/">September 2016</a></li>
	<li><a href="/2016/02/">February 2016</a></li>
	<li><a href="/2015/12/">December 2015</a></li>
	<li><a href="/2015/10/">October 2015</a></li>
	<li><a href="/2015/09/">September 2015</a></li>
	<li><a href="/2015/06/">June 2015</a></li>
	<li><a href="/2015/05/">May 2015</a></li>
	<li><a href="/2015/02/">February 2015</a></li>
	<li><a href="/2014/08/">August 2014</a></li>
	<li><a href="/2014/02/">February 2014</a></li>
	<li><a href="/2014/01/">January 2014</a></li>
	<li><a href="/2013/12/">December 2013</a></li>
	<li><a href="/2013/11/">November 2013</a></li>
	<li><a href="/2013/02/">February 2013</a></li>
	<li><a href="/2012/11/">November 2012</a></li>
	<li><a href="/2012/08/">August 2012</a></li>
	<li><a href="/2012/03/">March 2012</a></li>
	<li><a href="/2011/09/">September 2011</a></li>
	<li><a href="/2011/08/">August 2011</a></li>
	<li><a href="/2011/07/">July 2011</a></li>
	<li><a href="/2011/06/">June 2011</a></li>
	<li><a href="/2011/04/">April 2011</a></li>
	<li><a href="/2011/02/">February 2011</a></li>
	<li><a href="/2010/10/">October 2010</a></li>
	<li><a href="/2010/09/">September 2010</a></li>
	<li><a href="/2010/08/">August 2010</a></li>
	<li><a href="/2010/06/">June 2010</a></li>
	<li><a href="/2010/01/">January 2010</a></li>
	<li><a href="/2009/10/">October 2009</a></li>
	<li><a href="/2009/09/">September 2009</a></li>
	<li><a href="/2009/08/">August 2009</a></li>
	<li><a href="/2009/07/">July 2009</a></li>
	<li><a href="/2009/06/">June 2009</a></li>
	<li><a href="/2009/05/">May 2009</a></li>
			</ul>

			</div>
		<div id="recent-posts-2" class="widget widget_recent_entries">
		<h3 class="widget-title">Recent Posts</h3>
		<ul>
											<li>
					<a href="/2021/07/14/finally-moving-to-a-static-site/">Finally moving to a static site</a>
									</li>
											<li>
					<a href="/2021/01/02/double-helping-of-pi-hole/">Double helping of Pi Hole</a>
									</li>
											<li>
					<a href="/2019/07/16/dns-over-https-in-a-snap/">DNS over HTTPS in a snap</a>
									</li>
											<li>
					<a href="/2019/06/11/whizzy-labs-wireless-sensor/">Whizzy Labs Wireless Sensor</a>
									</li>
											<li>
					<a href="/2019/05/07/ubuntu-developer-desktop-survey-2019/">Ubuntu Developer Desktop Survey 2019</a>
									</li>
					</ul>

		</div>
<div id="categories-4" class="widget widget_categories">
<h3 class="widget-title">Categories</h3>
			<ul>
					<li class="cat-item cat-item-2">
<a href="/category/alexa/">Alexa</a>
</li>
	<li class="cat-item cat-item-3">
<a href="/category/arduino/">Arduino</a>
</li>
	<li class="cat-item cat-item-4">
<a href="/category/asterisk/">asterisk</a>
</li>
	<li class="cat-item cat-item-5">
<a href="/category/google-maps/">Google Maps</a>
</li>
	<li class="cat-item cat-item-6">
<a href="/category/iot/">IoT</a>
</li>
	<li class="cat-item cat-item-7">
<a href="/category/javascript/">Javascript</a>
</li>
	<li class="cat-item cat-item-8">
<a href="/category/linux/">linux</a>
</li>
	<li class="cat-item cat-item-9">
<a href="/category/making-the-world-a-better-place/">Making the world a better place</a>
</li>
	<li class="cat-item cat-item-10">
<a href="/category/raspberrypi/">RaspberryPi</a>
</li>
	<li class="cat-item cat-item-12">
<a href="/category/so-called-humor/">So called humor</a>
</li>
	<li class="cat-item cat-item-13">
<a href="/category/tv/">tv</a>
</li>
	<li class="cat-item cat-item-14">
<a href="/category/ubuntu-2/">Ubuntu</a>
</li>
	<li class="cat-item cat-item-15">
<a href="/category/uncategorized/">Uncategorized</a>
</li>
			</ul>

			</div>            </div>
<!-- .widget-area -->
</aside>
        </div>
    </div>
</div>

</div>
<!-- #main -->
	<footer id="footer" class="site-footer">
		<a href="#" id="toTop" class="toTop"><i class="fa fa-angle-up"></i></a>
		<div class="footer-sidebar">
    <div class="container">
        <div class="row">            
                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                            </div>
            <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                            </div>
            <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                            </div>
        </div>
<!-- .widget-area -->
    </div>
</div>		<div class="footer-inner">
			<div class="container">
								<p class="social-profile type1 pull-right">
																<a href="https://twitter.com/8none1" class="button-twitter" title="Twitter" target="_blank"><i class="fa fa-twitter-square"></i></a>
																					<a href="https://github.com/8none1" class="button-google" title="Google +" target="_blank"><i class="fa fa-google-plus-square"></i></a>
																															<a href="https://www.youtube.com/user/willcooke1" class="button-youtube" title="Youtube" target="_blank"><i class="fa fa-youtube-square"></i></a>
															                    
				</p>
				<p class="copyright"><span class="copyright-date">
						&copy; Copyright 2021                    </span>
										  <a href="/" title="whizzy.org" target="_blank">whizzy.org</a>
					  &#8226; Designed by <a href="https://motopress.com/" rel="nofollow" title="Premium WordPress Plugins and Themes">MotoPress</a>
					  &#8226; Proudly Powered by <a href="http://wordpress.org/" rel="nofollow" title="Semantic Personal Publishing Platform">WordPress</a>
					  				</p>
<!-- .copyright -->
			</div>
		</div>
	</footer>
</div>
<script type="text/javascript" src="/wp-includes/js/hoverIntent.min.js?ver=1.8.1" id="hoverIntent-js"></script>
<script type="text/javascript" src="/wp-content/themes/emmet-lite/js/superfish.min.js?ver=1.7.5" id="superfish.min-js"></script>
<script type="text/javascript" src="/wp-content/themes/emmet-lite/js/jquery.flexslider-min.js?ver=2.5.0" id="flexslider-js"></script>
<script type="text/javascript" src="/wp-content/themes/emmet-lite/js/jquery.appear.min.js?ver=0.3.6" id="jquery.appear-js"></script>
<script type="text/javascript" id="emmet-script-js-extra">
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
var template_directory_uri = {"url":"\/wp-content\/themes\/emmet-lite"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/themes/emmet-lite/js/emmet.min.js?ver=1.7.5" id="emmet-script-js"></script>
<script type="text/javascript" src="/wp-includes/js/wp-embed.min.js?ver=5.7.2" id="wp-embed-js"></script>
    <script>
        /(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var t,e=location.hash.substring(1);/^[A-z0-9_-]+$/.test(e)&&(t=document.getElementById(e))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())},!1);
    </script>
	</body>
</html>